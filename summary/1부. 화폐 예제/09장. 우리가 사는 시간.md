# ğŸ–¥ 09ì¥. ìš°ë¦¬ê°€ ì‚¬ëŠ” ì‹œê°„

í†µí™” ê°œë…ì„ ë„ì…í•´ë³´ë©´ ì–´ë–¨ê¹Œ?

í†µí™” ê°œë…ì„ ì–´ë–»ê²Œ í…ŒìŠ¤íŠ¸í•˜ê¸¸ ì›í•˜ëŠ”ê°€?

í†µí™”ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•œ ë³µì¡í•œ ê°ì²´ì™€, ê·¸ ê°ì²´ë“¤ì´ í•„ìš”í•œ ë§Œí¼ë§Œ ë§Œë“¤ì–´ì§€ë„ë¡ í•˜ê¸° ìœ„í•œ ê²½ëŸ‰ íŒ©í† ë¦¬(flyweight factories)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê² ì§€ë§Œ, ë‹¹ë¶„ê°„ì€ ê·¸ëŸ° ê²ƒ ëŒ€ì‹  ë¬¸ìì—´ì„ ì“°ì.

```java
@Test
void testCurrency() {
    assertEquals("USD", Money.dollar(1).currency());
    assertEquals("CHF", Money.franc(1).currency());
}
```

&nbsp;

ìš°ì„ , `Money`ì— `currency()` ë©”ì„œë“œë¥¼ ì„ ì–¸í•œë‹¤.

```java
abstract String currency();
```

&nbsp;

ê·¸ ë‹¤ìŒ ë‘ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ì´ë¥¼ êµ¬í˜„í•œë‹¤.

**Dollar**

```java
public String currency() {
    return "USD";
}
```

**Franc**

```java
public String currency() {
    return "CHF";
}
```

&nbsp;

ìš°ë¦° ë‘ í´ë˜ìŠ¤ë¥¼ ëª¨ë‘ í¬í•¨í•  ìˆ˜ ìˆëŠ” ë™ì¼í•œ êµ¬í˜„ì„ ì›í•œë‹¤.  
í†µí™”ë¥¼ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì— ì €ì¥í•˜ê³ , ë©”ì„œë“œì—ì„œëŠ” ê·¸ëƒ¥ ê·¸ê±¸ ë°˜í™˜í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.

**Dollar**

```java
public class Dollar extends Money {

    public Dollar(int amount) {
        this.amount = amount;
        this.currency = "USD";
    }

    public Money times(int multiplier) {
        return new Dollar(amount * multiplier);
    }

    public String currency() {
        return currency;
    }
}
```

**Franc**

```java
public class Franc extends Money{

    public Franc(int amount) {
        this.amount = amount;
        this.currency = "CHF";
    }

    public Money times(int multiplier) {
        return new Franc(amount * multiplier);
    }

    public String currency() {
        return currency;
    }
}
```

ë‘ `currency()`ê°€ ë™ì¼í•˜ë¯€ë¡œ ë³€ìˆ˜ ì„ ì–¸ê³¼ `currency()`êµ¬í˜„ì„ ëª¨ë‘ ìœ„ë¡œ ì˜¬ë¦´ ìˆ˜ (push up) ìˆê²Œ ëë‹¤.

**Money**

```java
protected String currency;

String currency() {
		return currency;
}
```

&nbsp;

ë¬¸ìì—´ `"USD"`ì™€ `"CHF"`ë¥¼ ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¡œ ì˜®ê¸´ë‹¤ë©´ ë‘ ìƒì„±ìê°€ ë™ì¼í•´ì§ˆ ê²ƒì´ê³ , ê·¸ë ‡ë‹¤ë©´ ê³µí†µ êµ¬í˜„ì„ ë§Œë“¤ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.  
ìš°ì„  ìƒì„±ìì— ì¸ìë¥¼ ì¶”ê°€í•œë‹¤.

**Dollar**

```java
public Dollar(int amount, String currency) {
    this.amount = amount;
    this.currency = currency;
}
```

**Franc**

```java
public Franc(int amount, String currency) {
    this.amount = amount;
    this.currency = currency;
}
```

&nbsp;

ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œ ë‘ ê³³ì´ ê¹¨ì§„ë‹¤.

```java
public Money times(int multiplier) {
    return new Franc(amount * multiplier, "CHF");
}
```

&nbsp;

`Franc.times()`ê°€ íŒ©í† ë¦¬ ë©”ì„œë“œê°€ ì•„ë‹Œ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ê³  ìˆë‹¤. ì´ê±¸ ì§€ê¸ˆ ê³ ì³ì•¼ í•˜ë‚˜, ì•„ë‹ˆë©´ ì§€ê¸ˆ í•˜ëŠ” ì¼ì´ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì•¼ í• ê¹Œ?  
ê¸°ë‹¤ë¦¬ëŠ” ê²ƒì´ ë§ë‹¤. ì§€ê¸ˆ í•˜ëŠ” ì¼ì„ ì¤‘ë‹¨í•˜ì§€ ì•Šì•„ì•¼ í•˜ë‹ˆê¹Œ.  

í•˜ì§€ë§Œ ë³´í†µ ì§§ì€ ì¤‘ë‹¨ì´ í•„ìš”í•  ê²½ìš° ì´ë¥¼ í”ì¾Œíˆ ë°›ì•„ë“¤ì´ëŠ” ê²ƒì´ ì¢‹ë‹¤. ë¬¼ë¡  ì§§ì€ ê²ƒë§Œì´ë‹¤.  
ë‹¨, í•˜ë˜ ì¼ì„ ì¤‘ë‹¨í•˜ê³  ë‹¤ë¥¸ ì¼ì„ í•˜ëŠ” ìƒíƒœì—ì„œ ê·¸ ì¼ì„ ë˜ ì¤‘ë‹¨í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

ì§„í–‰ í•˜ê¸° ì „ì— `times()`ë¥¼ ì •ë¦¬í•œë‹¤.

**Dollar**

```java
public Money times(int multiplier) {
    return Money.dollar(amount * multiplier);
}
```

**Franc**

```java
public Money times(int multiplier) {
    return Money.franc(amount * multiplier);
}
```

ì´ì œ íŒ©í„°ë¦¬ ë©”ì„œë“œê°€ í†µí™” ë¬¸ìì—´ì„ ì „ë‹¬í•  ìˆ˜ ìˆê²Œ ëë‹¤.

```java
public static Money dollar(int amount) {
    return new Dollar(amount, "USD");
}

public static Franc franc(int amount) {
    return new Franc(amount, "CHF");
}
```

&nbsp;

ë‘ ìƒì„±ìê°€ ì´ì œ ë™ì¼í•´ì¡Œë‹¤. êµ¬í˜„ì„ ìƒìœ„ í´ë˜ìŠ¤ì— ì˜¬ë¦¬ì.

**Money**

```java
public Money(int amount, String currency) {
    this.amount = amount;
    this.currency = currency;
}
```

**Dollar**

```java
public Dollar(int amount, String currency) {
    super(amount, currency);
}
```

**Franc**

```java
public Franc(int amount, String currency) {
    super(amount, currency);
}
```

&nbsp;

`times()`ë¥¼ ìƒìœ„ í´ë˜ìŠ¤ë¡œ ì˜¬ë¦¬ê³  í•˜ìœ„ í´ë˜ìŠ¤ë“¤ì„ ì œê±°í•  ì¤€ë¹„ê°€ ê±°ì˜ ë‹¤ ëë‹¤.

&nbsp;

### ì •ë¦¬

- í° ì„¤ê³„ ì•„ì´ë””ì–´ë¥¼ ë‹¤ë£¨ë‹¤ê°€ ì¡°ê¸ˆ ê³¤ê²½ì— ë¹ ì¡Œë‹¤. ê·¸ë˜ì„œ ë” ì‘ì€ ì‘ì—…ì„ ìˆ˜í–‰í–ˆë‹¤.
- ë‹¤ë¥¸ ë¶€ë¶„ë“¤ì„ íŒ©í† ë¦¬ ë©”ì„œë“œë¡œ ì˜®ê¹€ìœ¼ë¡œì¨ ë‘ ìƒì„±ìë¥¼ ì¼ì¹˜ì‹œì¼°ë‹¤.
- `times()`ê°€ íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë„ë¡ ë§Œë“¤ê¸° ìœ„í•´ ë¦¬íŒ©í† ë§ì„ ì ì‹œ ì¤‘ë‹¨í–ˆë‹¤.
- ë¹„ìŠ·í•œ ë¦¬íŒ©í† ë§(`Dollar`ì— í–ˆë˜ ì¼ì„ `Franc`ì—ë„ ì ìš©)ì„ í•œ ë²ˆì˜ í° ë‹¨ê³„ë¡œ ì²˜ë¦¬í–ˆë‹¤.
- ë™ì¼í•œ ìƒì„±ìë“¤ì„ ìƒìœ„ í´ë˜ìŠ¤ë¡œ ì˜®ê²¼ë‹¤.

&nbsp;

## ğŸ–¥ ëŠë‚€ì 

í†µí™” ê°œë… ë„ì…ì„ ìœ„í•´ ì–´ë–»ê²Œ êµ¬í˜„í• ê¹Œ ê³ ë¯¼í•˜ëŠ” ì¤‘ì— ì±…ì—ì„  *'í†µí™” ê°œë…ì„ ì–´ë–»ê²Œ í…ŒìŠ¤íŠ¸í•˜ê¸¸ ì›í•˜ëŠ”ê°€?'* ë¼ê³  í–ˆë‹¤. ì•„ì°¨, ê°œë°œì€ í…ŒìŠ¤íŠ¸ê°€ ì£¼ë„ í•´ì•¼ í•œë‹¤!

ìƒì„±ìì—ê¹Œì§€ ì¤‘ë³µì´ ì¡´ì¬í•œë‹¤ëŠ” ì ì„ ê°„ê³¼í–ˆë‹¤. ì •ì  íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ í†µí•´ ê³µí†µ êµ¬í˜„ì„ ë§Œë“¤ê³ , ê²°êµ­ ìƒì„±ìê¹Œì§€ push up í•˜ëŠ” ë¶€ë¶„ì´ ë†€ë¼ì› ë‹¤. `super()`ëŠ” ë°°ìš°ê¸°ë§Œ í•˜ê³  ì¨ë³´ì§€ ì•Šì•˜ëŠ”ë°, ì²˜ìŒ ì¨ë³´ëŠ” ê³„ê¸°ê°€ ë˜ì—ˆë‹¤.

`times()`ë¥¼ ì œê±°í•˜ê¸°ê¹Œì§€ ì •ë§ ë§ì€ ë‹¨ê³„ê°€ í•„ìš”í•˜ë‹¤. ì•„ì§ë„ ì¤‘ë³µëœ `times()`ëŠ” ì œê±°ë˜ì§€ ì•Šì•˜ë‹¤.  
ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ë‘ `Dollar`ì™€ `Franc`ë¥¼ ì œê±°í•  ì§€ ê¶ê¸ˆí•˜ë‹¤.
